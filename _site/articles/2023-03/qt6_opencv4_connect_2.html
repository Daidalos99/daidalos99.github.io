<!DOCTYPE html>
<html lang="en">





<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="Qt6(6.4.2)와 OpenCV4(4.7.0) 연동하기 - 2앞의 포스트에 이어서 이제 몇가지 설정만 더 해주면 Qt6에서 OpenCV4를 사용할 수 있다.거의 다 왔다. 조금만 더 힘내자!!이번 게시물도 앞에서 나온 Qt Wiki의 방법과 거의 비슷하다. 앞에서도 말했지만, 위...">
  <meta name="keywords" content="blog, jekyll, code, C++, cpp, and simulation">
  <meta name="author" content="qt6_opencv4_connect_2 | daidalos99">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#f5f5f5">

  <!-- Twitter Tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="qt6_opencv4_connect_2 | daidalos99">
  <meta name="twitter:description" content="Qt6(6.4.2)와 OpenCV4(4.7.0) 연동하기 - 2앞의 포스트에 이어서 이제 몇가지 설정만 더 해주면 Qt6에서 OpenCV4를 사용할 수 있다.거의 다 왔다. 조금만 더 힘내자!!이번 게시물도 앞에서 나온 Qt Wiki의 방법과 거의 비슷하다. 앞에서도 말했지만, 위...">
  
    <meta property="twitter:image" content="http://localhost:4000/img/leonids-logo.png">
  

  <!-- Open Graph Tags -->
  <meta property="og:type" content="blog">
  <meta property="og:url" content="http://localhost:4000/articles/2023-03/qt6_opencv4_connect_2">
  <meta property="og:title" content="qt6_opencv4_connect_2 | daidalos99">
  <meta property="og:description" content="Qt6(6.4.2)와 OpenCV4(4.7.0) 연동하기 - 2앞의 포스트에 이어서 이제 몇가지 설정만 더 해주면 Qt6에서 OpenCV4를 사용할 수 있다.거의 다 왔다. 조금만 더 힘내자!!이번 게시물도 앞에서 나온 Qt Wiki의 방법과 거의 비슷하다. 앞에서도 말했지만, 위...">
  
    <meta property="og:image" content="http://localhost:4000/img/leonids-logo.png">
  
  <title>qt6_opencv4_connect_2 | daidalos99</title>

  <!-- CSS files -->
  <link rel="stylesheet" href="http://localhost:4000/css/font-awesome.min.css">
  <link rel="stylesheet" href="http://localhost:4000/css/main.css">

  <link rel="canonical" href="http://localhost:4000/articles/2023-03/qt6_opencv4_connect_2">
  <link rel="alternate" type="application/rss+xml" title="daidalos99" href="http://localhost:4000/feed.xml" />

  <!-- Icons -->
  <!-- 16x16 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
  <!-- 32x32 -->
  <link rel="shortcut icon" href="http://localhost:4000/favicon.png">
</head>


<body>
  <div class="row">
    <div class="col s12 m3">
      <div class="table cover">
        

<div class="cover-card table-cell table-middle">
  
  <a href="http://localhost:4000/">
    <img src="http://localhost:4000/img/leonids-logo.png" alt="" class="avatar">
  </a>
  
  <a href="http://localhost:4000/" class="author_name">daidalos99</a>
  <span class="author_job">developer & engineer</span>
  <span class="author_bio mbm">daidalos99's code vault</span>
  <nav class="nav">
    <ul class="nav-list">
      <li class="nav-item">
        <a href="http://localhost:4000/">home</a>
      </li>
         
      <li class="nav-item">
        <a href="http://localhost:4000/archive/">Archive</a>
      </li>
            
      <li class="nav-item">
        <a href="http://localhost:4000/categories/">Categories</a>
      </li>
          
      <li class="nav-item">
        <a href="http://localhost:4000/resume/">Resume</a>
      </li>
        
      <li class="nav-item">
        <a href="http://localhost:4000/tags/">Tags</a>
      </li>
         
    </ul>
  </nav>
  <script type="text/javascript">
  // based on http://stackoverflow.com/a/10300743/280842
  function gen_mail_to_link(hs, subject) {
    var lhs,rhs;
    var p = hs.split('@');
    lhs = p[0];
    rhs = p[1];
    document.write("<a class=\"social-link-item\" target=\"_blank\" href=\"mailto");
    document.write(":" + lhs + "@");
    document.write(rhs + "?subject=" + subject + "\"><i class=\"fa fa-fw fa-envelope\"></i><\/a>");
  }
</script>
<div class="social-links">
  <ul>
    
      <li>
      <script>gen_mail_to_link('daidalos0430@gmail.com', 'Hello from website');</script>
      </li>
    
    
    
    
    
    
    
    
    
    <li><a href="http://github.com/Daidalos99" class="social-link-item" target="_blank"><i class="fa fa-fw fa-github"></i></a></li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>

</div>

      </div>
    </div>
    <div class="col s12 m9">
      <div class="post-listing">
        <a class="btn" href= "http://localhost:4000/" >
  Home
</a>



<div id="post">
  <header class="post-header">
    <h1 title="qt6_opencv4_connect_2">qt6_opencv4_connect_2</h1>
    <span class="post-meta">
      <span class="post-date">
        9 MAR 2023
      </span>
      •
      <span class="read-time" title="Estimated read time">
  
  
    4 mins read
  
</span>

    </span>

  </header>

  <article class="post-content">
    <h2 id="qt6642와-opencv4470-연동하기---2">Qt6(6.4.2)와 OpenCV4(4.7.0) 연동하기 - 2</h2>

<p>앞의 포스트에 이어서 이제 몇가지 설정만 더 해주면 Qt6에서 OpenCV4를 사용할 수 있다.
거의 다 왔다. 조금만 더 힘내자!!
이번 게시물도 앞에서 나온 <a href="https://wiki.qt.io/How_to_setup_Qt_and_openCV_on_Windows">Qt Wiki</a>의 방법과 거의 비슷하다. 앞에서도 말했지만, 위 링크에서는 Qt5와 OpenCV3 버전을 쓰므로 Qt6 + OpenCV4의 조합을 사용하는 나의 방법과 유사하지만, 조금 다르다는 것을 알고 보자.</p>

<p>이전에 설치한 Qt Creator(나의 경우 Qt 6.4.2를 사용하기 떄문에 Creator는 9.0.2)를 실행한다. 이제 Create Project를 한다. 다음과 같이 설정하면 된다.
<img src="/assets/img/etc/qt6_opencv4_connect_2/qt_widgets_application.png" alt="img1" /></p>

<p>프로젝트 생성 시 ‘Qt Widgets Application’을 선택한다.
그 다음 제목과 경로를 설정해주고, ‘Next’를 누른다.</p>

<p>다음으로, Build System을 설정하는데 여기서 ‘CMake’가 아닌 ‘<strong>qmake</strong>‘로 설정을 해준다. 이렇게 해야 <strong>.pro</strong> 파일이 생기고, 거기에 OpenCV관련 전처리구문을 넣어줄 수 있다. .pro파일은 Qt Creator의 프로젝트파일이다. .pro파일에 대한 자세한 설명은 <a href="https://saengjja.tistory.com/145">생짜님의 블로그 게시물</a>을 통해 확인할 수 있다.
<img src="/assets/img/etc/qt6_opencv4_connect_2/qmake.png" alt="img2" /></p>

<p>Next를 누르면서 프로젝트 개인설정을 해주고, Kit Selection에서 컴파일러를 골라준다. 나의 경우는 ‘Desktop Qt 6.4.2 MinGW 64-bit’를 선택하고 ‘Next’를 눌러주었다.
<img src="/assets/img/etc/qt6_opencv4_connect_2/kit_selection.png" alt="img3" /></p>

<p>이제 프로젝트와 소스파일이 생성되었을텐데 우리는 여기서 ‘제목.pro’ 파일과 ‘mainwindow.cpp’ 파일을 건드려줄 것이다.</p>

<p>‘제목.pro’ 파일은 기존의 내용을 아래와 같은 내용으로 덮어씌운다.
Qt Wiki에 나오는 내용이지만, 내가 설치한 경로와 버전에 맞춰서 코드를 조금씩 수정하였다. 
또한, LIBS+= 하면서 추가할때, Wiki예제는 OpenCV3.2.0을 사용하지만, 나는 OpenCV4.7.0을 사용할 것이기에, 동적 라이브러리 파일(.dll) 뒷부분의 320을 470으로 바꿔주었다.</p>

<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cp">#-------------------------------------------------
</span>    <span class="cp">#
</span>    <span class="cp"># Project created by QtCreator 2017-03-05T12:30:06
</span>    <span class="cp">#
</span>    <span class="cp">#-------------------------------------------------
</span>
    <span class="n">QT</span>       <span class="o">+=</span> <span class="n">core</span> <span class="n">gui</span>

    <span class="n">greaterThan</span><span class="p">(</span><span class="n">QT_MAJOR_VERSION</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span><span class="o">:</span> <span class="n">QT</span> <span class="o">+=</span> <span class="n">widgets</span>

    <span class="n">TARGET</span> <span class="o">=</span> <span class="n">opencvtest</span>
    <span class="n">TEMPLATE</span> <span class="o">=</span> <span class="n">app</span>

    <span class="cp"># The following define makes your compiler emit warnings if you use
</span>    <span class="cp"># any feature of Qt which as been marked as deprecated (the exact warnings
</span>    <span class="cp"># depend on your compiler). Please consult the documentation of the
</span>    <span class="cp"># deprecated API in order to know how to port your code away from it.
</span>    <span class="n">DEFINES</span> <span class="o">+=</span> <span class="n">QT_DEPRECATED_WARNINGS</span>

    <span class="cp"># You can also make your code fail to compile if you use deprecated APIs.
</span>    <span class="cp"># In order to do so, uncomment the following line.
</span>    <span class="cp"># You can also select to disable deprecated APIs only up to a certain version of Qt.
</span>    <span class="cp">#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0
</span>

    <span class="n">SOURCES</span> <span class="o">+=</span> <span class="n">main</span><span class="p">.</span><span class="n">cpp</span>\
            <span class="n">mainwindow</span><span class="p">.</span><span class="n">cpp</span>

    <span class="n">HEADERS</span>  <span class="o">+=</span> <span class="n">mainwindow</span><span class="p">.</span><span class="n">h</span>

    <span class="n">FORMS</span>    <span class="o">+=</span> <span class="n">mainwindow</span><span class="p">.</span><span class="n">ui</span>

    <span class="n">INCLUDEPATH</span> <span class="o">+=</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">opencv</span><span class="err">\</span><span class="n">build</span><span class="err">\</span><span class="n">include</span>

    <span class="n">LIBS</span> <span class="o">+=</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="n">build</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">libopencv_core470</span><span class="p">.</span><span class="n">dll</span>
    <span class="n">LIBS</span> <span class="o">+=</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="n">build</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">libopencv_highgui470</span><span class="p">.</span><span class="n">dll</span>
    <span class="n">LIBS</span> <span class="o">+=</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="n">build</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">libopencv_imgcodecs470</span><span class="p">.</span><span class="n">dll</span>
    <span class="n">LIBS</span> <span class="o">+=</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="n">build</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">libopencv_imgproc470</span><span class="p">.</span><span class="n">dll</span>
    <span class="n">LIBS</span> <span class="o">+=</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="n">build</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">libopencv_features2d470</span><span class="p">.</span><span class="n">dll</span>
    <span class="n">LIBS</span> <span class="o">+=</span> <span class="n">C</span><span class="o">:</span><span class="err">\</span><span class="n">opencv</span><span class="o">-</span><span class="n">build</span><span class="err">\</span><span class="n">bin</span><span class="err">\</span><span class="n">libopencv_calib3d470</span><span class="p">.</span><span class="n">dll</span>

    <span class="cp"># more correct variant, how set includepath and libs for mingw
</span>    <span class="cp"># add system variable: OPENCV_SDK_DIR=D:/opencv/opencv-build/install
</span>    <span class="cp"># read http://doc.qt.io/qt-5/qmake-variable-reference.html#libs
</span>
    <span class="cp">#INCLUDEPATH += $$(OPENCV_SDK_DIR)/include
</span>
    <span class="cp">#LIBS += -L$$(OPENCV_SDK_DIR)/x86/mingw/lib \
    #        -lopencv_core320        \
    #        -lopencv_highgui320     \
    #        -lopencv_imgcodecs320   \
    #        -lopencv_imgproc320     \
    #        -lopencv_features2d320  \
    #        -lopencv_calib3d320
</span></code></pre></div></div>

<p>‘mainwindow.cpp’ 파일은 아래와 같이 대체한다.</p>
<div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="cp">#include</span> <span class="cpf">"mainwindow.h"</span><span class="cp">
</span>    <span class="cp">#include</span> <span class="cpf">"ui_mainwindow.h"</span><span class="cp">
</span>
    <span class="cp">#include</span> <span class="cpf">&lt;opencv2/core/core.hpp&gt;</span><span class="cp">
</span>    <span class="cp">#include</span> <span class="cpf">&lt;opencv2/highgui/highgui.hpp&gt;</span><span class="cp">
</span>
    <span class="n">MainWindow</span><span class="o">::</span><span class="n">MainWindow</span><span class="p">(</span><span class="n">QWidget</span> <span class="o">*</span><span class="n">parent</span><span class="p">)</span> <span class="o">:</span>
        <span class="n">QMainWindow</span><span class="p">(</span><span class="n">parent</span><span class="p">),</span>
        <span class="n">ui</span><span class="p">(</span><span class="k">new</span> <span class="n">Ui</span><span class="o">::</span><span class="n">MainWindow</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">ui</span><span class="o">-&gt;</span><span class="n">setupUi</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

        <span class="c1">// read an image</span>
        <span class="n">cv</span><span class="o">::</span><span class="n">Mat</span> <span class="n">image</span> <span class="o">=</span> <span class="n">cv</span><span class="o">::</span><span class="n">imread</span><span class="p">(</span><span class="s">"C://1.jpg"</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="c1">// create image window named "My Image"</span>
        <span class="n">cv</span><span class="o">::</span><span class="n">namedWindow</span><span class="p">(</span><span class="s">"My Image"</span><span class="p">);</span>
        <span class="c1">// show the image on window</span>
        <span class="n">cv</span><span class="o">::</span><span class="n">imshow</span><span class="p">(</span><span class="s">"My Image"</span><span class="p">,</span> <span class="n">image</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">MainWindow</span><span class="o">::~</span><span class="n">MainWindow</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">delete</span> <span class="n">ui</span><span class="p">;</span>
    <span class="p">}</span>
</code></pre></div></div>

<p>‘C:\1.jpg’라는 이미지를 띄우는 예제 코드이므로, 나는 ‘C:\‘에다가 ‘1.jpg’를 넣어주었다.</p>

<p><img src="/assets/img/etc/qt6_opencv4_connect_2/my_image.png" alt="img4" /></p>

<p>오… 된다!!</p>

<p>이로써 Qt6에 OpenCV4 연동하기를 마친다.</p>

<p>이 글을 따라하셔서 잘 되셨다면, 혹은 잘 안되었더라도 댓글 한번씩만 남겨주시면 감사하겠습니다.</p>

  </article>
</div>

<div class="share-buttons">
  <h6>Share on: </h6>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/articles/2023-03/qt6_opencv4_connect_2" class="twitter btn" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/articles/2023-03/qt6_opencv4_connect_2" class="facebook btn" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=http://localhost:4000/articles/2023-03/qt6_opencv4_connect_2" class="google-plus btn" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
    <li>
      <a href="https://news.ycombinator.com/submitlink?u=http://localhost:4000/articles/2023-03/qt6_opencv4_connect_2" class="hacker-news btn" title="Share on Hacker News"><i class="fa fa-hacker-news"></i><span> Hacker News</span></a>
    </li>
    <li>
      <a href="https://www.reddit.com/submit?url=http://localhost:4000/articles/2023-03/qt6_opencv4_connect_2" class="reddit btn" title="Share on Reddit"><i class="fa fa-reddit"></i><span> Reddit</span></a>
    </li>
  </ul>
</div><!-- end share-buttons -->


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'https-daidalos99-github-io';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



        <footer>
  &copy; 2024 daidalos99. Powered by <a href="http://jekyllrb.com/">Jekyll</a>, <a href="http://github.com/renyuanz/leonids/">leonids theme</a> made with <i class="fa fa-heart heart-icon"></i>
</footer>

      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://localhost:4000/js/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="http://localhost:4000/js/main.js"></script>


</body>
</html>
